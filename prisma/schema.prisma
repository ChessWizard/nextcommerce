generator client {
  provider = "prisma-client-js"
  previewFeatures = ["driverAdapters"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Product{
    id String @id @default(uuid()) @db.Uuid
    name String
    slug String @unique(map: "ix_product_slug")
    category String
    images String[]
    brand String
    description String
    stock Int
    prices Price[]
    rating Decimal @default(0) @db.Decimal(3,2)
    numberOfReviews Int @default(0)
    isFeatured Boolean
    banner String?
    createdAt DateTime @default(now()) @db.Timestamp(6)
    modifiedAt DateTime? @updatedAt @db.Timestamp(6)
}

enum Currency{
  TRY
  USD
}

model Price{
  id String @id @default(uuid()) @db.Uuid
  value Decimal @default(0) @db.Decimal(12,2)
  currency Currency
  
  productId  String @default(uuid()) @db.Uuid
  product    Product  @relation(fields: [productId], references: [id])
}